# План работ по шагам
## Минимум для проекта
1. Вручную запустить perf record, perf script, увидеть выдачу. Написать скрипт для запуска record,
    script. Первый коммит в репозиторий.
   [Детально](step1.md)
2. Разбор perf script в скрипте. Извлечение
    имени объектного файла и количества сэмплов из perf script.
   [Детально](step2.md)
3. Формирование записей: sqlite. Сохранение perf файлов. Обновление количества
    сэмплов при повторных запусках.
   [Детально](step3.md)
4. Обнаружение бинарных файлов.
   [Детально](step4.md)
## Оптимизация
5. Конвертирование профиля. Для всех perf файлов: perf2bolt. merge-fdata.
   [Детально](step5.md)
6. Оптимизация при превышении заданного количества сэмплов. Вызов BOLT.
    Сохранение оптимизированного файла.
   [Детально](step6.md)
7. Подмена оптимизированных файлов при помощи символических ссылок.
    Сброс количества сэмплов. Флажок в бд.
   [Детально](step7.md)
## Автоматический сервис
8. systemd: создать .service и .timer.
   [Детально](step8.md)
## Применение и результаты
9. Измерение производительности для вручную собранного clang.
   [Детально](step9.md)
## Страница проекта
10. Обзор. Инструкция по установке: зависимости, сервис. Инструкция по
    мониторингу. Требования к бинарным файлам.
   [Детально](step10.md)

## Better engineering
9. Выделение функций. Выделить вызов perf, работу с бд в отдельные функции.
10. perf script: пропуск оптимизированных файлов.
11. Параметризация опций: argparse. Пути к файлам perf и бд как параметры
    командной строки.
12. Оптимизация. Печать логов BOLT.
13. Логирование. Печать всех сообщений в лог.
13. Ротация perf файлов.
14. Systemd: log rotation.
15. Выделение Buildid из объектного файла - уникальный идентификатор.
16. Пред-оптимизация. Вызов perf2bolt, сохранение fdata.
17. Пред-оптимизация. Объединение fdata (merge-fdata).
18. Пред-oптимизация. Вызов BOLT, анализ динамического покрытия.
19. Фильтрация приложений: perf record с IPC, icache/iTLB метриками.
20. БД: среднее IPC, icache MPKI, iTLB MPKI.
21. BAT mode.
22. Systemd: CPU, memory limits.
